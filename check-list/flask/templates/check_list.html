<!DOCTYPE html>
<html>
  <head>
    <title>Flask ESTHER Checklist Web App - MariaDB</title>
    <style>
body { font-family: Arial; margin: 50px; }
table { border-collapse: collapse; width: 100%; }
th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
th { background-color: #4CAF50; color: white; }
.btn { padding: 5px 10px; margin: 2px; text-decoration: none; 
  background-color: #008CBA; color: white; border-radius: 3px; }
            .btn:hover { background-color: #005f7a; }
    </style>
    <meta http-equiv="refresh" content="5">
  </head>
  <body>
    <h1> {{roleName}}: Esther Checklist Management. Report Id {{reportId}} </h1>
    <h2> Parameters: CC_Target:{{parameters[0]}} Bar, SP He/H2/O2: {{parameters[1]}}/{{parameters[2]}}/{{parameters[3]}}</h2>
    <table>
      <tr>
        <th>ID</th>
        <th>Report</th>
        <th>Actions</th>
      </tr>
      {% for rprt in reportItems %}
      <tr>
        <td>{{ rprt[0] }}</td>
        <td>{{ rprt[1] }}</td>
        <td>{{ rprt[2] }}</td>
      </tr>
      {% endfor %}
    </table>
<hr style="height: 3px; background-color: gray; width:98%;">
    <h2>Completed Actions in Report {{reportId}}</h2>
    <table>
      <tr>
        <th>ID</th>
        <th>Order</th>
        <th>Date/Time</th>
        <th>Resp</th>
        <th>Action</th>
        <th>Status</th>
      </tr>
      {% for action in completed %}
      <tr>
        <td>{{ action[0] }}</td>
        <td>{{ action[1] }}</td>
        <td>{{ action[2] }}</td>
        <td>{{ action[3] }}</td>
        <td>{{ action[5] }}</td>
        <td>{{ action[4] }}</td>
      </tr>
      {% endfor %}
    </table>
<hr style="height: 3px; background-color: gray; width:98%;">
    {% if lenMissing > 0 %}
    <h2>Missing Actions</h2>
    <table>
      <tr>
        <th>Resp</th>
        <th>ID</th>
        <th>Order</th>
        <th>Action</th>
        <th>System</th>
      </tr>
      {% for item in missingItems %}
      <tr>
        <td>{{ item[0] }}</td>
        <td>{{ item[1] }}</td>
        <td>{{ item[2] }}</td>
        <td>{{ item[3] }}</td>
        <td>{{ item[4] }}</td>
      </tr>
      {% endfor %}
    </table>
<hr style="height: 3px; background-color: gray; width:98%;">
    {% endif %}
    <h2>Next Actions</h2>
    {% if lenNext > 0 %}
    <table>
      <tr>
        <th>ID</th>
        <th>Order</th>
        <th>Action</th>
        <th>Check Action OK</th>
        <th>Check Action Not&nbsp;OK</th>
      </tr>
      <tr>
        <td>{{ nextItems[0][0] }}</td>
        <td>{{ nextItems[0][1] }}</td>
        <td>{{ nextItems[0][2] }}</td>
        {% if lenMissing == 0 %}
        <td>
          <a href="{{ url_for('insert', report_id=reportId, item_id=nextItems[0][0], status=0) }}" class="btn">&#9745;&nbsp;OK</a>
        </td>
        <td>
          <a href="{{ url_for('attention', report_id=reportId, item_id=nextItems[0][0]) }}" class="btn">&#9888;&nbsp;ATT</a>
        </td>
        {% endif %}
      </tr>
      {% for i in range(1, lenNext) %}
      <tr>
        <td>{{ nextItems[i][0] }}</td>
        <td>{{ nextItems[i][1] }}</td>
        <td>{{ nextItems[i][2] }}</td>
        <td></td>
      </tr>
      {% endfor %}
    </table>
    {% endif %}
<hr style="height: 3px; background-color: gray; width:98%;">
    <button onClick="window.location.reload();">Refresh Tables</button>
    <h2>Select Other <a href="{{ url_for('dashboard', shot=reportId) }}">List</a></h2>
    <h3> <a href="/logout">Logout</a></h3>
  </body>
</html>
